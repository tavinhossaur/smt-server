<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>DashboardController.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">RN01-02-03-CoverageTest (Nov 23, 2025 6:04:18 PM)</a> &gt; <a href="../../index.html" class="el_group">smt_backend</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">com.ifsp.tavinho.smt_backend.infra.controllers.guest</a> &gt; <span class="el_source">DashboardController.java</span></div><h1>DashboardController.java</h1><pre class="source lang-java linenums">package com.ifsp.tavinho.smt_backend.infra.controllers.guest;

import java.util.List;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.ifsp.tavinho.smt_backend.shared.responses.ServerApiResponse;
import com.ifsp.tavinho.smt_backend.domain.dtos.output.ClassroomWithEventsDTO;
import com.ifsp.tavinho.smt_backend.domain.dtos.output.DisciplineDetailsResponseSimplifiedDTO;
import com.ifsp.tavinho.smt_backend.domain.dtos.output.EventDetailsResponseDTO;
import com.ifsp.tavinho.smt_backend.domain.dtos.output.EventDetailsResponseSimplifiedDTO;
import com.ifsp.tavinho.smt_backend.domain.dtos.output.ProfessorWithEventsDTO;
import com.ifsp.tavinho.smt_backend.domain.dtos.output.SearchQueryResponseDTO;
import com.ifsp.tavinho.smt_backend.domain.entities.Classroom;
import com.ifsp.tavinho.smt_backend.domain.entities.Course;
import com.ifsp.tavinho.smt_backend.application.services.guest.DashboardService;

import lombok.RequiredArgsConstructor;

import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.responses.ApiResponse;
import io.swagger.v3.oas.annotations.responses.ApiResponses;
import io.swagger.v3.oas.annotations.tags.Tag;
import io.swagger.v3.oas.annotations.media.Content;
import io.swagger.v3.oas.annotations.media.Schema;

import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.DASHBOARD_ROUTE;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.PROFESSORS;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.CLASSROOMS;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.DISCIPLINES;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.COURSES;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.EVENTS;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.BY_ID;
import static com.ifsp.tavinho.smt_backend.infra.routes.Routes.SEARCH;

@Tag(name = &quot;Dashboard (Guest)&quot;, description = &quot;Endpoints for dashboard data access, such as professors, classrooms, courses and events.&quot;)
@RestController
@RequiredArgsConstructor
@RequestMapping(DASHBOARD_ROUTE)
public class DashboardController {
    
    private final DashboardService dashboardService;

    @Operation(summary = &quot;Get detailed event info&quot;, description = &quot;Retrieves a detailed event info by event ID.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Event info successfully returned.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = EventDetailsResponseDTO.class))),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Event ID was not provided.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Event not found.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(EVENTS + BY_ID)
    public ResponseEntity&lt;EventDetailsResponseDTO&gt; getDetailedEventInfo(@PathVariable String id) {
<span class="nc" id="L59">        return ResponseEntity.ok(this.dashboardService.getDetailedEventInfo(id));</span>
    }

    @Operation(summary = &quot;Get professor with events&quot;, description = &quot;Retrieves a professor and their events by professor ID.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Professor and events successfully returned.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ProfessorWithEventsDTO.class))),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Professor ID was not provided.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Professor not found.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(PROFESSORS + BY_ID)
    public ResponseEntity&lt;ProfessorWithEventsDTO&gt; getProfessorWithWeekEventsList(@PathVariable String id) {
<span class="nc" id="L72">        return ResponseEntity.ok(this.dashboardService.getProfessorWithWeekEventsList(id));</span>
    }

    @Operation(summary = &quot;List events with detailed info&quot;, description = &quot;Lists all events and their professors, classrooms, courses and disciplines.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;List of events with detailed info successfully returned.&quot;),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(EVENTS)
    public ResponseEntity&lt;List&lt;EventDetailsResponseSimplifiedDTO&gt;&gt; getEventsWithDetailedInfo() {
<span class="nc" id="L83">        return ResponseEntity.ok(this.dashboardService.listEventsWithDetailedInfo());</span>
    }

    @Operation(summary = &quot;List disciplines with courses&quot;, description = &quot;Lists all disciplines and their courses.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;List of disciplines with courses successfully returned.&quot;),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(DISCIPLINES)
    public ResponseEntity&lt;List&lt;DisciplineDetailsResponseSimplifiedDTO&gt;&gt; getDisciplinesWithCourses() {
<span class="nc" id="L94">        return ResponseEntity.ok(this.dashboardService.listDisciplinesWithCourses());</span>
    }
    
    @Operation(summary = &quot;List professors with events&quot;, description = &quot;Lists all professors and their events filtered by weekday and course.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;List of professors and events successfully returned.&quot;),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Weekday or course values were not provided.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(PROFESSORS)
    public ResponseEntity&lt;List&lt;ProfessorWithEventsDTO&gt;&gt; getProfessorsWithWeekEventsListFromDayAndCourse(@RequestParam String weekday, @RequestParam String course) {
<span class="nc" id="L106">        return ResponseEntity.ok(this.dashboardService.getProfessorsWithWeekEventsListFromDayAndCourse(weekday, course));</span>
    }

    @Operation(summary = &quot;Get classroom with events&quot;, description = &quot;Retrieves a classroom and their events by classroom ID.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Classroom and events successfully returned.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ClassroomWithEventsDTO.class))),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Classroom ID was not provided.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Classroom not found.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(CLASSROOMS + BY_ID)
    public ResponseEntity&lt;ClassroomWithEventsDTO&gt; getClassroomWithWeekEventsList(@PathVariable String id) {
<span class="nc" id="L119">        return ResponseEntity.ok(this.dashboardService.getClassroomWithEvents(id));</span>
    }
    
    @Operation(summary = &quot;List classrooms by floor&quot;, description = &quot;Lists all classrooms filtered by floor.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;List of classrooms successfully returned.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(type = &quot;array&quot;, implementation = Classroom.class))),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Floor value was not provided.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(CLASSROOMS)
    public ResponseEntity&lt;List&lt;Classroom&gt;&gt; getClassroomsFromFloor(@RequestParam String floor) {
<span class="nc" id="L131">        return ResponseEntity.ok(this.dashboardService.getClassroomsFromFloor(floor));</span>
    }

    @Operation(summary = &quot;List all courses&quot;, description = &quot;Lists all available courses.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;List of courses successfully returned.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(type = &quot;array&quot;, implementation = Course.class))),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(COURSES)
    public ResponseEntity&lt;List&lt;Course&gt;&gt; getAllCoursesList() {
<span class="nc" id="L142">        return ResponseEntity.ok(this.dashboardService.getAllCoursesList());</span>
    }
    
    @Operation(summary = &quot;Search professors and classrooms&quot;, description = &quot;Searches for professors and classrooms by the provided term.&quot;)
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Search successful.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = SearchQueryResponseDTO.class))),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Invalid query.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class))),
        @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error.&quot;, content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = ServerApiResponse.class)))
    })
    @GetMapping(SEARCH)
    public ResponseEntity&lt;SearchQueryResponseDTO&gt; searchProfessorsAndClassrooms(@RequestParam String query) {
<span class="nc" id="L153">        return ResponseEntity.ok(this.dashboardService.searchProfessorsAndClassrooms(query));</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span>RN01-02-03-CoverageTest (Nov 23, 2025 6:04:18 PM)</div></body></html>